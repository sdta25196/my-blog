## å‰ç«¯åˆ†è¯æ–¹æ¡ˆ

ä½¿ç”¨ Intl API

Intl.Segmenter å¯¹è±¡æ”¯æŒè¯­è¨€æ•æ„Ÿçš„æ–‡æœ¬åˆ†å‰²ï¼Œå…è®¸ä½ å°†ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²æˆæœ‰æ„ä¹‰çš„ç‰‡æ®µï¼ˆå­—ã€è¯ã€å¥ï¼‰

## è¯­æ³•

```js
new Intl.Segmenter()
new Intl.Segmenter(locales)
new Intl.Segmenter(locales, options)
```

`locales` å¯é€‰,å¸¦æœ‰ BCP 47 è¯­è¨€åŒºåŸŸæ ‡è®°çš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ–è€…ä¸€ä¸ªè¿™æ ·çš„å­—ç¬¦ä¸²æ•°ç»„ã€‚å¯¹äº locales å‚æ•°çš„ä¸€èˆ¬å½¢å¼å’Œè§£é‡Šï¼Œå‚è§è¯­è¨€åŒºåŸŸè¯†åˆ«å’Œåˆ¤å®šã€‚

`options` å¯é€‰,å¸¦æœ‰éƒ¨åˆ†æˆ–å…¨éƒ¨ä»¥ä¸‹å±æ€§çš„ä¸€ä¸ªå¯¹è±¡ï¼š

* granularity å¯é€‰,å­—ç¬¦ä¸²ã€‚å¯é€‰å€¼å¦‚ä¸‹ï¼š

"grapheme"ï¼ˆé»˜è®¤ï¼‰æ ¹æ®è¯­è¨€åŒºåŸŸï¼Œå°†è¾“å…¥å€¼æŒ‰å­—ï¼ˆç”¨æˆ·å¯ä»¥æ„ŸçŸ¥çš„å­—ç¬¦ï¼‰åˆ’åˆ†è¾¹ç•Œã€‚

"word" æ ¹æ®è¯­è¨€åŒºåŸŸï¼Œå°†è¾“å…¥å€¼æŒ‰è¯åˆ’åˆ†è¾¹ç•Œã€‚

"sentence" æ ¹æ®è¯­è¨€åŒºåŸŸï¼Œå°†è¾“å…¥å€¼æŒ‰å¥åˆ’åˆ†è¾¹ç•Œã€‚

* localeMatcher å¯é€‰ å°†è¦ä½¿ç”¨çš„è¯­è¨€åŒºåŸŸåŒ¹é…ç®—æ³•ã€‚å¯é€‰å€¼å¦‚ä¸‹ï¼š

"best fit"ï¼ˆé»˜è®¤ï¼‰ è¿è¡Œæ—¶å¯èƒ½ä¼šé€‰æ‹©ä¸€ä¸ªå¯èƒ½æ¯”æŸ¥æ‰¾ç®—æ³•çš„ç»“æœæ›´åŠ åˆé€‚çš„è¯­è¨€åŒºåŸŸã€‚

"lookup" ä½¿ç”¨ BCP 47 æŸ¥æ‰¾ç®—æ³•æ¥ä» locales å‚æ•°ä¸­é€‰æ‹©è¯­è¨€åŒºåŸŸã€‚å¯¹äº locales å‚æ•°ä¸­çš„æ¯ä¸€ä¸ªè¯­è¨€åŒºåŸŸï¼Œä¼šè¿”å›ç¬¬ä¸€ä¸ªè¿è¡Œæ—¶æ”¯æŒçš„è¯­è¨€åŒºåŸŸï¼ˆæœ‰å¯èƒ½ä¼šç§»é™¤ç”¨äºé™åˆ¶åŒºåŸŸçš„å­æ ‡è®°ï¼Œæ¥æ‰¾åˆ°ä¸€ä¸ªæ”¯æŒçš„è¯­è¨€åŒºåŸŸã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœè¿è¡Œæ—¶æ”¯æŒ "de" ä½†ä¸æ”¯æŒ "de-CH"ï¼Œç”¨æˆ·ä¼ å…¥çš„ "de-CH" å¯èƒ½å°±ä¼šä»¥ "de" ä¸ºç»“æœè¿›è¡Œä½¿ç”¨ï¼‰ã€‚

## ç”¨ä¾‹

**å¤„ç†åˆ†å¥ã€åˆ†è¯**

```js
const segmenter = new Intl.Segmenter(
  'zh', { granularity: 'sentence' } // å¥
  // 'zh', { granularity: 'word' } // è¯
);

console.log(
  Array.from(
    segmenter.segment('ä½ å¥½ï¼Œæˆ‘æ˜¯ ConardLiã€‚æˆ‘æ¥äº†ï¼ä½ æ˜¯è°ï¼Ÿä½ åœ¨å“ªï¼Ÿ'),
    s => s.segment
  )
);
```

**å¤„ç†æ ‡å‡†è¯**

```js
var a = new Intl.Segmenter('zh', { granularity: 'word' });

Array.from(a.segment('ä½ å¥½ï¼Œæˆ‘æ˜¯ ConardLiã€‚æˆ‘æ¥äº†ï¼ä½ æ˜¯è°ï¼Ÿä½ åœ¨å“ªï¼Ÿ')).filter(s => s.isWordLike).map(s => s.segment)
```

**å¤„ç†emoji**

```js 
const segmenter = new Intl.Segmenter('en', {
  granularity: 'word'
});

Array.from(
  segmenter.segment('æˆ‘ä»¬12345ğŸ˜µâ€ğŸ’«'),
  s => s.segment
)
```


```js
const segmenter = new Intl.Segmenter('en', {
  granularity: 'grapheme'
});

Array.from(
  segmenter.segment('12345ğŸ˜µâ€ğŸ’«'),
  s => s.segment
)
```
